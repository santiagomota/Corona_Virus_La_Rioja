!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Starred=t():e.Starred=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){e.exports=n(66)},52:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){var n={uuid:t};return Voonto.$.extend(n,this.options),Voonto.$.ajax({url:this.url+"/"+e,method:"post",data:n})}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){var o=t.medio,i=t.usuario,a=t.signature,s=t.timestamp;n(this,e),this.options={medio:o,usuario:i,signature:a,timestamp:s},this.url=r}return o(e,[{key:"isStarred",value:function(e){if(this.promise)return this.promise;var t={uuid:e};return Voonto.$.extend(t,this.options),this.promise=Voonto.$.ajax({url:this.url+"/existe",data:t}),this.promise}},{key:"setStarred",value:function(e){return r.call(this,"alta",e)}},{key:"unsetStarred",value:function(e){return r.call(this,"baja",e)}},{key:"getStarred",value:function(){var e={inicio:0,numero:1e3};return Voonto.$.extend(e,this.options),Voonto.$.ajax({url:this.url+"/listado",data:e})}}]),e}();t.default=i},57:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){this.isStarred=e,e?this.element$.addClass(a.STARRED_CLASS):this.element$.removeClass(a.STARRED_CLASS)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(58),s=1,c=0,l=function(){function e(t,n){var i=this,a=n.newsId,c=n.userType,l=n.starred,u=n.showLogin;r(this,e),this.isUserRegistered="anonimo"!==c,this.starred=l,this.element$=t,this.isStarred=!1,this.showLogin=u,this.newsId=a,this.isUserRegistered&&l.isStarred(this.newsId).then(function(e){e.existe===s&&o.call(i,!0)}),t.on("click",this.buttonClicked.bind(this))}return i(e,[{key:"buttonClicked",value:function(){this.isUserRegistered?this.isStarred?this.unsetStarred():this.setStarred():this.showLogin()}},{key:"setStarred",value:function(){var e=this;this.starred.setStarred(this.newsId).then(function(t){t.status===c&&o.call(e,!0)})}},{key:"unsetStarred",value:function(){var e=this;this.starred.unsetStarred(this.newsId).then(function(t){t.status===c&&o.call(e,!1)})}}]),e}();t.default=l},58:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CONFIG_NAMESPACE="vocento.config.starred",t.STARRED_CLASS="voc-bookmarked"},61:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(62),s=r(a),c=n(63),l=r(c),u=function(){function e(t,n){var r=n.starred,i=n.templatesUrl,a=n.templateName,s=n.tlddomain;o(this,e),this.element$=t,this.options={starred:r,templatesUrl:i,templateName:a,tlddomain:s}}return i(e,[{key:"render",value:function(){var e=this;this.options.starred.getStarred().then(function(t){if(void 0!==t.data){for(var n=new s.default(e.options.tlddomain),r=0;r<t.data.length;r++)e.element$.append(n.render(t.data[r]));new l.default($("[data-voc-starred-remove]"),e.options.starred)}})}}]),e}();t.default=u},62:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o={estandar:"box",reportaje:"circle",default:"type-3"},i={"on-extra/territorios":{classPart:"territorios",content:"Territorios"},"on-extra/dinero":{classPart:"dinero",content:"Dinero"},"on-extra/butaca":{classPart:"butaca",content:"La Butaca"},"on-extra/musica":{classPart:"musik",content:"Musik"}},a={yes:{classPart:"on-extra",content:"ON+EXTRA"}},s=function(){function e(t){n(this,e),this.domain=t}return r(e,[{key:"render",value:function(e){var t,n,r,s,c,l,u,d,f;if(t=e.genero in o?o[e.genero]:o.default,n=moment(new Date(e.fecha)).format("DD/MM/YYYY"),r=moment(new Date(e.fecha)).format("HH:mm"),u=e.author?'<div class="news-author"> '+e.author+" </div>":"",d=""+e.url,e.seccion in i?(s=i[e.seccion].classPart,c=i[e.seccion].content):e.extra in a&&(s=a[e.extra].classPart,c=a[e.extra].content),l=e.seccion in i||e.extra in a?'<div class="news-category news-category-'+s+'">'+c+"</div>":"",f="",e.imagen){var v="circle"==t?"figure":"picture";f='<div class="news-fav-section-2 col-xs-11 col-sm-4 col-md-3 col-lg-3 no-padding--left no-padding--right">\n        <div class="news-image-'+t+'">\n          <'+v+'>\n            <a href="'+d+'" class="voc-horizontal voc-img-icon-link">\n              <img src="'+e.imagen+'" alt="'+e.titulo+'">\n            </a>\n          </'+v+">\n        </div>\n      </div>"}var h='<div class="favoritos-news" data-voc-molinillo="" data-voc-starred-element-'+e.uuid+'>\n          <div class="news-fav-section-1 col-xs-12 col-sm-7 col-md-8 col-lg-8 no-padding--left">\n            <div class="news-data-left">\n              <div class="news-top-data">\n                '+l+'\n                <div class="news-date">'+n+'</div>\n                <div class="news-hour">'+r+'</div>\n              </div>\n              <div class="news-middle-title">\n                <a href="'+d+'">'+e.titulo+"</a>\n              </div>\n              "+u+"\n            </div>\n          </div>\n          "+f+'\n          <div class="news-fav-section-3 col-xs-1 col-sm-1 col-md-1 col-lg-1 no-padding--left no-padding--right">\n            <div class="close-button">\n              <a title="molinillo" type="button" id="hide" class="voc-molinillo-btn" href="#" data-voc-starred-remove="'+e.uuid+'">\n                <i class="voc-icons">w</i>\n              </a>\n            </div>\n          </div>\n        </div>';return h}}]),e}();t.default=s},63:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=0,i=function(){function e(t,r){n(this,e),this.element$=t,this.options={starred:r},t.on("click",this.buttonClicked.bind(this))}return r(e,[{key:"buttonClicked",value:function(e){var t=$(e.target).parent().data("voc-starred-remove");this.options.starred.unsetStarred(t).then(function(e){e.status===o&&$("[data-voc-starred-element-"+t+"]").remove()})}}]),e}();t.default=i},66:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0;var o=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(67),a=r(i),s=n(58),c=n(57),l=r(c),u=n(61),d=r(u),f=n(52),v=r(f),h=Voonto,p=h.$;Voonto.ready.then(function(e){var t,n,r,i,a,c,u,f,h;t=[e.when("vocuser:ready"),e.when("vocuser:userdata")],Voonto.RSVP.all(t).then(function(t){var m=o(t,2),b=m[0],w=m[1];if(n=b.getUserType(),r=b.showLogin,i=w.responseGetAccountInfo,c=e.lookup("vocento.site.media"),u=e.lookup("vocento.site.tlddomain"),f=e.lookup(s.CONFIG_NAMESPACE),a=e.lookup("vocento.site.content"),!f.serviceUrl)throw Error("[Starred] service url is not defined within "+s.CONFIG_NAMESPACE);if(!f.templatesUrl)throw Error("[Starred] templates url is not defined within "+s.CONFIG_NAMESPACE);h=new v.default({medio:c,usuario:i.UID,signature:i.UIDSignature,timestamp:i.signatureTimestamp},f.serviceUrl),a.newsId&&new l.default(p("[data-voc-starred]"),{newsId:a.newsId,userType:n,starred:h,showLogin:r}),p("[data-voc-starred-list]").each(function(){var e=p(this),t=new d.default(e,{starred:h,templatesUrl:f.templatesUrl,templateName:e.data("voc-starred-template"),tlddomain:u});t.render()})})});t.VERSION=a.default.version},67:function(e,t){e.exports={name:"starred",version:"1.0.10",description:"",main:"src/index.js",scripts:{test:"./node_modules/.bin/webpack && ./node_modules/.bin/mocha-phantomjs dist/spec/index.html --reporter xunit --file test-results.xml",start:"webpack-dev-server",build:"./node_modules/webpack/bin/webpack.js"},contributors:["Ivan Perez P <ippalomino@vocento.com>","Esther Ibáñez Gonález <eibanez@ces.vocento.com>"],license:"SEE LICENSE IN LICENSE.md",devDependencies:{"babel-core":"^6.17.0","babel-loader":"^6.2.5","babel-polyfill":"^6.16.0","babel-preset-es2015":"^6.16.0",chai:"^3.5.0",chalk:"^1.1.3","html-webpack-plugin":"^2.24.1","json-loader":"^0.5.4",mocha:"^3.1.0","mocha-loader":"^1.0.0","mocha-phantomjs":"^4.1.0",webpack:"^1.13.3","webpack-shell-plugin":"^0.4.3"}}}})});
//# sourceMappingURL=starred.js.map